<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from rosbot.urdf.xacro              | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- 
    @file rosbot.urdf.xacro
    @brief Descripción del robot móvil Rosbot utilizando Xacro y URDF.

    Este archivo define la estructura, visualización y propiedades físicas del 
    robot móvil Rosbot. Utiliza macros Xacro para incluir elementos comunes y 
    define las características de los componentes principales del robot, tales 
    como el chasis y las ruedas. Además, configura los materiales y la simulación 
    en Gazebo para la visualización y simulación del robot en un entorno 3D.

    Características principales:
    - Incluye un archivo "include.xacro" que contiene definiciones comunes como 
      colores y cálculos de inercias.
    - Define los enlaces (links) para el chasis, las ruedas y otras partes del robot.
    - Configura las uniones (joints) entre los diferentes componentes del robot, 
      incluyendo las restricciones y la dinámica de las ruedas.
    - Aplica materiales específicos para la visualización en Gazebo, los cuales 
      están definidos en un archivo separado.
    - Las inercias de los componentes, tales como el chasis y las ruedas, son 
      calculadas automáticamente mediante macros definidas en un archivo separado.
    
    - En la sección que define los parámetros para la simulación en Gazebo, se 
      utilizan etiquetas `<gazebo>` para personalizar la apariencia de componentes 
      específicos del robot dentro del entorno de simulación. Cada etiqueta 
      `<gazebo reference="..." >` se refiere a un componente en particular, como 
      `chasis` o las diferentes ruedas, y asigna un material específico para 
      su visualización en Gazebo.
      
    @note Es necesario modificar la ruta del archivo "include.xacro" según la 
    estructura de directorios de tu proyecto.

    @usage Este archivo es utilizado en la simulación del robot Rosbot en entornos 
    como RViz y Gazebo, y puede ser integrado en lanzadores ROS2 para su ejecución.
-->
<robot name="rosbot">
  <material name="white">
    <color rgba="1 1 1 1"/>
  </material>
  <material name="orange">
    <color rgba="1 0.3 0.1 1"/>
  </material>
  <material name="blue">
    <color rgba="0.2 0.2 1 1"/>
  </material>
  <!-- Especificar colores de gazebo -->
  <gazebo reference="chasis">
    <material>Gazebo/Blue</material>
  </gazebo>
  <gazebo reference="right_wheel">
    <material>Gazebo/White</material>
  </gazebo>
  <gazebo reference="left_wheel">
    <material>Gazebo/White</material>
  </gazebo>
  <gazebo reference="right_wheel_front">
    <material>Gazebo/White</material>
  </gazebo>
  <gazebo reference="left_wheel_front">
    <material>Gazebo/White</material>
  </gazebo>
  <link name="base_footprint"/>
  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="chasis"/>
    <origin xyz="0 0 0.19"/>
  </joint>
  <!--Chasis-->
  <link name="chasis">
    <visual>
      <geometry>
        <mesh filename="package://rosbot/meshes/box.STL" scale="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="-0.381 0.2 -0.075" rpy = "1.57 0 0"/>
      <material name="blue"/>
    </visual>
    <collision>
      <origin xyz="-0.381 0.2 -0.075" rpy = "1.57 0 0"/>
      <geometry>
        <mesh filename="package://rosbot/meshes/box.STL" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="30"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
    <!--lidar-->

  <link name="lidar_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.125"/>
      <inertia ixx="0.001"  ixy="0"  ixz="0" iyy="0.001" iyz="0" izz="0.001" />
    </inertial>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
         <cylinder radius="0.05" length="0.05"/>
      </geometry>
    </collision>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
         <cylinder radius="0.05" length="0.09"/>
      </geometry>
    </visual>
  </link>
     
  <joint name="lidar_joint" type="fixed">
    <parent link="chasis"/>
    <child link="lidar_link"/>
    <origin xyz=" 0.2 0 0.15" rpy="0 0 0"/>
  </joint>
     
  <gazebo reference="lidar_link">
    <sensor name="lidar" type="ray">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <update_rate>5</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>120</samples>
            <resolution>1.000000</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.3</min>
          <max>15.0</max>
          <resolution>0.015</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <plugin name="scan" filename="libgazebo_ros_ray_sensor.so">
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>lidar_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo reference="lidar_link">
    <mu1>0.01</mu1>
    <mu2>0.01</mu2>
    <material>Gazebo/Black</material>
  </gazebo>
  <!--Right-->
  <link name="right_rear_wheel">
    <visual>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
  <joint name="joint_right_rear_wheel" type="continuous">
    <parent link="chasis"/>
    <child link="right_rear_wheel"/>
    <origin rpy="1.57 0 0" xyz="-0.27 -0.295 -0.07"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!--Left -->
  <link name="left_rear_wheel">
    <visual>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
  <joint name="joint_left_rear_wheel" type="continuous">
    <parent link="chasis"/>
    <child link="left_rear_wheel"/>
    <origin rpy="1.57 0 0" xyz="-0.27 0.295 -0.07"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!--
  <link name="master">
  </link>
  <joint name="master_joint" type="revolute">
    <parent link="chasis"/>
    <child link="master"/>
    <origin xyz="0 0 0" rpy= "1.57 0 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" velocity="1" lower="-0.78" upper="0.78"/>
  </joint>
  -->
  <link name="right_wheel_front_assembly">
    <visual>
      <geometry>
        <cylinder length="0.001" radius="0.04"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
  <link name="right_wheel_front">
    <visual>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
  <joint name="joint_right_wheel_front" type="revolute">
    <parent link="chasis"/>
    <child link="right_wheel_front_assembly"/>
    <origin rpy="1.57 0 0" xyz="0.31 -0.295 -0.07"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" lower="-0.78" upper="0.78" velocity="1"/>
    <!--<mimic joint="master_joint" multiplier="1.0" offset="0"/>-->
  </joint>
  <joint name="joint_right_wheel_assembly" type="continuous">
    <parent link="right_wheel_front_assembly"/>
    <child link="right_wheel_front"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="100" velocity="1"/>
  </joint>
  <link name="left_wheel_front_assembly">
    <visual>
      <geometry>
        <cylinder length="0.001" radius="0.04"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.01"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
  <link name="left_wheel_front">
    <visual>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
      <origin xyz="0 0 0"/>
      <material name="white"/>
    </visual>
    <collision>
      <origin xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.08" radius="0.12"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="1"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
  </link>
  <joint name="joint_left_wheel_front" type="revolute">
    <parent link="chasis"/>
    <child link="left_wheel_front_assembly"/>
    <origin rpy="1.57 0 0" xyz="0.31 0.295 -0.07"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" lower="-0.78" upper="0.78" velocity="1"/>
    <!--<mimic joint="master_joint" multiplier="1.0" offset="0"/>-->
  </joint>
  <joint name="joint_left_wheel_assembly" type="continuous">
    <parent link="left_wheel_front_assembly"/>
    <child link="left_wheel_front"/>
    <origin rpy="0 0 0" xyz="0.0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="100" velocity="1"/>
  </joint>
  <!--camara-->
  <link name="camara_link">
    <visual>
      <origin rpy="0 -0.156 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.04 0.17 0.03"/>
      </geometry>
      <material name="orange"/>
    </visual>
  </link>
  <joint name="base_camara" type="fixed">
    <parent link="chasis"/>
    <child link="camara_link"/>
    <origin rpy="0 -0.156 0" xyz=" 0.30 0 0.1"/>
  </joint>
</robot>
